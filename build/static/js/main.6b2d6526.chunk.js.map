{"version":3,"sources":["assets/1.png","assets/2.png","assets/3.png","assets/4.png","assets/5.png","assets/bg.jpeg","assets/arrow.png","utils/index.ts","components/Target/index.tsx","components/Loading/index.tsx","utils/queryParse.ts","pages/home/index.tsx","pages/poster/index.tsx","App.tsx","index.tsx"],"names":["module","exports","imgUrls","img1","img2","img3","img4","img5","placeArr","Target","avatar","place","map","item","index","key","id","toString","src","alt","style","Loading","loading","color","size","queryParse","search","items","slice","split","data","i","length","value","Home","props","useState","setLoading","setPlace","setAvatar","useEffect","Cookie","get","a","location","window","href","url","code","fetch","then","res","json","userinfo","set","headimgurl","getData","getImage","alert","imgArr","Promise","all","slider","document","getElementById","body","html2canvas","useCORS","forEach","canvas","imgUrl","toDataURL","push","console","log","history","pathname","state","query","bg","onChange","e","target","handlePlace","arrow","onClick","Poster","setIndex","CSSTransition","in","timeout","classNames","unmountOnExit","appear","onEnter","el","onEntering","onEntered","onExit","onExiting","onExited","now","App","exact","path","component","ReactDOM","render"],"mappings":"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","file":"static/js/main.6b2d6526.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/1.cd1ee7eb.png\";","module.exports = __webpack_public_path__ + \"static/media/2.c95f19ce.png\";","module.exports = __webpack_public_path__ + \"static/media/3.8007385d.png\";","module.exports = __webpack_public_path__ + \"static/media/4.ca3f3750.png\";","module.exports = __webpack_public_path__ + \"static/media/5.e8b1b11c.png\";","module.exports = __webpack_public_path__ + \"static/media/bg.783f9465.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/arrow.eaf1f932.png\";","import img1 from \"../assets/1.png\";\nimport img2 from \"../assets/2.png\";\nimport img3 from \"../assets/3.png\";\nimport img4 from \"../assets/4.png\";\nimport img5 from \"../assets/5.png\";\n\nconst imgUrls: Array<string> = [img1, img2, img3, img4, img5];\n\nconst placeArr: Array<string> = [\n  \"北京\",\n  \"上海\",\n  \"天津\",\n  \"重庆\",\n  \"河北\",\n  \"山西\",\n  \"辽宁\",\n  \"吉林\",\n  \"河南\",\n  \"江苏\",\n  \"浙江\",\n  \"安徽\",\n  \"福建\",\n  \"江西\",\n  \"山东\",\n  \"湖北\",\n  \"湖南\",\n  \"广东\",\n  \"海南\",\n  \"四川\",\n  \"贵州\",\n  \"云南\",\n  \"陕西\",\n  \"甘肃\",\n  \"青海\",\n  \"黑龙江\",\n  \"内蒙古\",\n  \"广西\",\n  \"西藏\",\n  \"宁夏\",\n  \"新疆\",\n  \"台湾\",\n  \"香港\",\n  \"澳门\",\n  \"其它\"\n];\n\nconst REDIRECT_URI =\n  \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxfde496ddf1d15848&redirect_uri=https%3A%2F%2Fhealth.wizzstudio.com&response_type=code&scope=snsapi_userinfo&state=shit#wechat_redirect\";\n\nexport { imgUrls, placeArr, REDIRECT_URI };\n","import React, { SFC } from \"react\";\nimport css from \"styled-jsx/css\";\nimport { imgUrls } from \"../../utils\";\n\ninterface Props {\n  avatar: string;\n  place: string;\n}\n\nconst Target: SFC<Props> = ({ avatar, place }) => {\n  return (\n    <div>\n      {imgUrls.map((item, index) => (\n        <div key={item} id={\"tg\" + index.toString()} className=\"wrap\">\n          <img src={item} className=\"img\" alt=\"\"></img>\n          <div className=\"title\">\n            {avatar && <img src={avatar} alt=\"\" className=\"avatar\" />}\n            我在<span className=\"place\">{place}</span>\n          </div>\n        </div>\n      ))}\n      <style jsx>{style}</style>\n    </div>\n  );\n};\n\nexport default Target;\n\nconst style = css`\n  .wrap {\n    position: relative;\n  }\n  .img {\n    width: 100%;\n  }\n  .title {\n    color: #eee;\n    font-size: 2rem;\n    position: absolute;\n    top: 10%;\n    left: 35%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .avatar {\n    width: 80px;\n    height: 80px;\n    border-radius: 10px;\n    margin-right: 10px;\n  }\n  .place {\n  }\n`;\n","import React, { FC } from \"react\";\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport css from \"styled-jsx/css\";\n\ninterface Props {\n  loading: boolean;\n}\n\nconst Loading: FC<Props> = ({ loading }) => {\n  return (\n    <div className=\"loader\">\n      <BounceLoader color={\"white\"} size={150} loading={loading}>\n        合成\n      </BounceLoader>\n      {loading && <div className=\"tip\">努力生成中...</div>}\n      {loading && <div className=\"overlay\"></div>}\n      <style jsx>{style}</style>\n    </div>\n  );\n};\nexport default Loading;\n\nconst style = css`\n  .overlay {\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n  }\n  .loader {\n    position: absolute;\n    top: calc(50% - 75px);\n    left: calc(50% - 75px);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n  }\n  .tip {\n    font-size: 1em;\n    color: #eeeed1;\n    z-index: 999;\n  }\n`;\n","interface Data {\n  [key: string]: string;\n}\n\nexport default function queryParse(search: string): Data {\n  let codeStr = search.slice(1);\n  let items = codeStr.split(\"&\");\n  let data: Data = {};\n  for (let i = 0; i < items.length; i++) {\n    let [key, value] = items[i].split(\"=\");\n    data[key] = value;\n  }\n  return data;\n}\n","import React, { SFC, useState, useEffect } from \"react\";\nimport css from \"styled-jsx/css\";\nimport html2canvas from \"html2canvas\";\nimport Target from \"../../components/Target\";\nimport Loading from \"../../components/Loading\";\nimport bg from \"../../assets/bg.jpeg\";\nimport { placeArr, REDIRECT_URI } from \"../../utils\";\nimport queryParse from \"../../utils/queryParse\";\nimport xdUrl from \"../../assets/xd.png\";\nimport arrow from \"../../assets/arrow.png\";\nimport Cookie from \"js-cookie\";\n\ninterface Props {\n  history: { push: any };\n  location: { search: string };\n}\nconst Home: SFC<Props> = props => {\n  const [loading, setLoading] = useState(false);\n  const [place, setPlace] = useState(\"default\");\n  const [avatar, setAvatar] = useState(\"\");\n\n  useEffect(() => {\n    if (Cookie.get(\"place\")) {\n      setPlace(Cookie.get(\"place\"));\n    }\n    const getData = async () => {\n      if (!props.location.search) {\n        window.location.href = REDIRECT_URI;\n        return;\n      }\n      if (Cookie.get(\"avatar\")) {\n        setAvatar(Cookie.get(\"avatar\"));\n        return;\n      }\n      let data = queryParse(props.location.search);\n      let url = `https://health.wizzstudio.com/login?code=${data.code}`;\n      try {\n        const userinfo = await fetch(url).then(res => res.json());\n        // let avatarUrl = userinfo.headimgurl ? userinfo.headimgurl : xdUrl;\n        Cookie.set(\"avatar\", userinfo.headimgurl);\n        setAvatar(userinfo.headimgurl);\n      } catch (error) {\n        // setAvatar(xd);\n      }\n    };\n    getData();\n  }, []);\n\n  const getImage = async () => {\n    if (place === \"default\") {\n      alert(\"请选择所在地点\");\n      return;\n    }\n    let imgArr: Array<string> = [];\n    setLoading(true);\n    const res = await Promise.all(\n      [0, 1, 2, 3, 4].map(async (id: number) => {\n        const slider = document.getElementById(`tg${id}`) || document.body;\n        return await html2canvas(slider, {\n          useCORS: true\n        });\n      })\n    );\n    res.forEach((canvas: any) => {\n      var imgUrl = canvas.toDataURL(\"image/jpeg\");\n      imgArr.push(imgUrl);\n    });\n    console.log(\"imgArr\", imgArr);\n    props.history.push({\n      pathname: \"/poster\",\n      state: { place, imgArr },\n      query: {\n        code: 22\n      }\n    });\n  };\n\n  const handlePlace = (e: any) => {\n    setPlace(e.target.value);\n    Cookie.set(\"place\", e.target.value);\n  };\n\n  return (\n    <div className=\"app\">\n      <img className=\"bg\" src={bg} />\n      <select value={place} className=\"place\" onChange={e => handlePlace(e)}>\n        <option value=\"default\">选择</option>\n        {placeArr.map(item => (\n          <option key={item} value={item}>\n            {item}\n          </option>\n        ))}\n      </select>\n      <Loading loading={loading}></Loading>\n      <div className=\"target\">\n        <Target avatar={avatar} place={place}></Target>\n      </div>\n      <img src={arrow} alt=\"\" className=\"arrow\" onClick={getImage} />\n      <style jsx>{style}</style>\n    </div>\n  );\n};\n\nexport default Home;\n\nconst style = css`\n  .app {\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n  }\n  .bg {\n    width: 100vw;\n    height: 100vh;\n  }\n  select {\n    color: red;\n    background: inherit;\n    border: none;\n    outline: none;\n    width: 60px;\n    height: 40px;\n    line-height: 40px;\n    appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    text-align: center;\n  }\n  .place {\n    color: black;\n    font-size: 1.3rem;\n    position: absolute;\n    top: 83%;\n    left: 26%;\n  }\n  .target {\n    position: absolute;\n    top: -9999px;\n    left: -9999px;\n  }\n  .arrow {\n    width: 50px;\n    height: 50px;\n    position: absolute;\n    right: 0px;\n    top: calc(50% - 30px);\n  }\n`;\n","import React, { SFC, useState } from \"react\";\nimport css from \"styled-jsx/css\";\nimport { imgUrls } from \"../../utils/index\";\nimport { CSSTransition } from \"react-transition-group\";\n\ninterface Props {\n  place: string;\n  location: { state: any };\n}\n\nconst Poster: SFC<Props> = props => {\n  let imgArr = props.location.state ? props.location.state.imgArr : imgUrls;\n  const [index, setIndex] = useState(0);\n\n  const changeImg = () => {\n    let now = index;\n    setIndex(++now % 5);\n  };\n  return (\n    <div className=\"poster\">\n      <div className=\"wrap\">\n        <CSSTransition\n          in={true}\n          timeout={1000}\n          classNames=\"fade\"\n          unmountOnExit\n          appear={true}\n          onEnter={el => {}}\n          onEntering={el => {}}\n          onEntered={el => {}}\n          onExit={el => {}}\n          onExiting={el => {}}\n          onExited={el => {}}\n        >\n          <img\n            className=\"item\"\n            src={imgArr[index]}\n            alt=\"\"\n            onClick={changeImg}\n          />\n        </CSSTransition>\n        <div className=\"tip\">轻触更换，长按保存</div>\n      </div>\n\n      <style jsx>{style}</style>\n    </div>\n  );\n};\n\nexport default Poster;\n\nconst style = css`\n  .poster {\n    width: 100vw;\n    height: 100vh;\n    background: #cd2626;\n  }\n  .tip {\n    display: flex;\n    justify-content: center;\n    font-size: 1em;\n    color: #eee;\n  }\n  .wrap {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    height: 100vh;\n  }\n  .item {\n    width: 75vw;\n    border: 3px solid #eee;\n    border-radius: 10px;\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.3), 0 6px 20px 0 rgba(0, 0, 0, 0.2);\n  }\n  .fade-enter,\n  .fade-appear {\n    opacity: 0;\n  }\n  .fade-enter-active,\n  .fade-appear-active {\n    opacity: 1;\n    transition: opacity 1200ms;\n  }\n  .fade-enter-done {\n    opacity: 1;\n  }\n  .fade-exit {\n    opacity: 1;\n  }\n  .fade-exit-active {\n    opacity: 0;\n    transition: opacity 1200ms;\n  }\n  .fade-exit-done {\n    opacity: 0;\n  }\n`;\n","import React, { SFC } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Home from \"./pages/home\";\nimport Poster from \"./pages/poster\";\n\nconst App: SFC = () => (\n  <div>\n    <Route exact path=\"/\" component={Home}></Route>\n    <Route exact path=\"/poster\" component={Poster}></Route>\n    <style jsx global>\n      {`\n        body {\n          margin: 0;\n          padding: 0;\n        }\n        img {\n          vertical-align: bottom;\n          display: block;\n        }\n        .slick-track {\n          overflow: hidden !important;\n        }\n      `}\n    </style>\n  </div>\n);\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}