{"version":3,"sources":["assets/1.jpeg","assets/2.jpeg","assets/3.jpeg","assets/4.jpeg","assets/5.jpeg","assets/bg.jpeg","assets/arrow.png","utils/index.ts","components/Target/index.tsx","components/Loading/index.tsx","utils/queryParse.ts","pages/home/index.tsx","components/Slider/index.tsx","pages/poster/index.tsx","App.tsx","index.tsx"],"names":["module","exports","imgUrls","img1","img2","img3","img4","img5","placeArr","Target","avatar","place","map","item","index","key","id","toString","src","alt","style","Loading","loading","color","size","queryParse","search","items","slice","split","data","i","length","value","Home","props","useState","setLoading","setPlace","setAvatar","useEffect","a","location","window","href","url","code","fetch","then","res","json","userinfo","headimgurl","getData","getImage","alert","imgArr","Promise","all","slider","document","getElementById","body","html2canvas","useCORS","forEach","canvas","imgUrl","toDataURL","push","console","log","history","pathname","state","query","bg","placeholder","onChange","e","target","arrow","onClick","MySlider","num","setNum","settings","infinite","speed","centerPadding","centerMode","afterChange","fade","className","change","slickNext","ref","c","Poster","Slider","App","exact","path","component","ReactDOM","render"],"mappings":"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","file":"static/js/main.cd607980.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/1.6a2e631a.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/2.fd226bd1.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/3.acd69001.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/4.6dcbc09e.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/5.d213e808.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/bg.ebf75211.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/arrow.eaf1f932.png\";","import img1 from \"../assets/1.jpeg\";\nimport img2 from \"../assets/2.jpeg\";\nimport img3 from \"../assets/3.jpeg\";\nimport img4 from \"../assets/4.jpeg\";\nimport img5 from \"../assets/5.jpeg\";\n\nconst imgUrls: Array<string> = [img1, img2, img3, img4, img5];\n\nconst placeArr: Array<string> = [\n  \"北京\",\n  \"上海\",\n  \"天津\",\n  \"重庆\",\n  \"河北\",\n  \"山西\",\n  \"辽宁\",\n  \"吉林\",\n  \"河南\",\n  \"江苏\",\n  \"浙江\",\n  \"安徽\",\n  \"福建\",\n  \"江西\",\n  \"山东\",\n  \"湖北\",\n  \"湖南\",\n  \"广东\",\n  \"海南\",\n  \"四川\",\n  \"贵州\",\n  \"云南\",\n  \"陕西\",\n  \"甘肃\",\n  \"青海\",\n  \"黑龙江\",\n  \"内蒙古\",\n  \"广西\",\n  \"西藏\",\n  \"宁夏\",\n  \"新疆\",\n  \"台湾\",\n  \"香港\",\n  \"澳门\",\n  \"其它\"\n];\n\nconst REDIRECT_URI =\n  \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxfde496ddf1d15848&redirect_uri=https%3A%2F%2Fhealth.wizzstudio.com&response_type=code&scope=snsapi_userinfo&state=shit#wechat_redirect\";\n\nexport { imgUrls, placeArr, REDIRECT_URI };\n","import React, { SFC } from \"react\";\nimport css from \"styled-jsx/css\";\nimport { imgUrls } from \"../../utils\";\n\ninterface Props {\n  avatar: string;\n  place: string;\n}\n\nconst Target: SFC<Props> = ({ avatar, place }) => {\n  return (\n    <div>\n      {imgUrls.map((item, index) => (\n        <div key={item} id={\"tg\" + index.toString()} className=\"wrap\">\n          <img src={item} className=\"img\" alt=\"\"></img>\n          <div className=\"title\">\n            <img src={avatar} alt=\"\" className=\"avatar\" />\n            我在<span className=\"place\">{place}</span>\n          </div>\n        </div>\n      ))}\n      <style jsx>{style}</style>\n    </div>\n  );\n};\n\nexport default Target;\n\nconst style = css`\n  .wrap {\n    position: relative;\n  }\n  .img {\n    width: 100%;\n  }\n  .title {\n    color: #eee;\n    font-size: 2rem;\n    position: absolute;\n    top: 10%;\n    left: 35%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .avatar {\n    width: 80px;\n    height: 80px;\n    border-radius: 10px;\n    margin-right: 10px;\n  }\n  .place {\n  }\n`;\n","import React, { FC } from \"react\";\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport css from \"styled-jsx/css\";\n\ninterface Props {\n  loading: boolean;\n}\n\nconst Loading: FC<Props> = ({ loading }) => {\n  return (\n    <div className=\"loader\">\n      <BounceLoader color={\"white\"} size={150} loading={loading}>\n        合成\n      </BounceLoader>\n      {loading && <div className=\"tip\">努力生成中...</div>}\n      {loading && <div className=\"overlay\"></div>}\n      <style jsx>{style}</style>\n    </div>\n  );\n};\nexport default Loading;\n\nconst style = css`\n  .overlay {\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.3);\n  }\n  .loader {\n    position: absolute;\n    top: 40vh;\n    left: 32vw;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n  .tip {\n    font-size: 1.3em;\n    color: #eee;\n  }\n`;\n","interface Data {\n  [key: string]: string;\n}\n\nexport default function queryParse(search: string): Data {\n  let codeStr = search.slice(1);\n  let items = codeStr.split(\"&\");\n  let data: Data = {};\n  for (let i = 0; i < items.length; i++) {\n    let [key, value] = items[i].split(\"=\");\n    data[key] = value;\n  }\n  return data;\n}\n","import React, { SFC, useState, useEffect } from \"react\";\nimport css from \"styled-jsx/css\";\nimport html2canvas from \"html2canvas\";\nimport Target from \"../../components/Target\";\nimport Loading from \"../../components/Loading\";\nimport bg from \"../../assets/bg.jpeg\";\nimport { placeArr, REDIRECT_URI } from \"../../utils\";\nimport queryParse from \"../../utils/queryParse\";\nimport arrow from \"../../assets/arrow.png\";\ninterface Props {\n  history: { push: any };\n  location: { search: string };\n}\nlet antAvatar =\n  \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\";\nconst Home: SFC<Props> = props => {\n  const [loading, setLoading] = useState(false);\n  const [place, setPlace] = useState(\"default\");\n  const [avatar, setAvatar] = useState(\"\");\n\n  useEffect(() => {\n    const getData = async () => {\n      if (!props.location.search) {\n        window.location.href = REDIRECT_URI;\n        return;\n      }\n      let data = queryParse(props.location.search);\n      let url = `https://health.wizzstudio.com/login?code=${data.code}`;\n      const userinfo = await fetch(url).then(res => res.json());\n      setAvatar(userinfo.headimgurl);\n    };\n    getData();\n  }, []);\n\n  const getImage = async () => {\n    if (place === \"default\") {\n      alert(\"请选择所在地点\");\n      return;\n    }\n    let imgArr: Array<string> = [];\n    setLoading(true);\n    const res = await Promise.all(\n      [0, 1, 2, 3, 4].map(async (id: number) => {\n        const slider = document.getElementById(`tg${id}`) || document.body;\n        return await html2canvas(slider, {\n          useCORS: true\n        });\n      })\n    );\n    res.forEach((canvas: any) => {\n      var imgUrl = canvas.toDataURL(\"image/jpeg\");\n      imgArr.push(imgUrl);\n    });\n    console.log(\"imgArr\", imgArr);\n    props.history.push({\n      pathname: \"/poster\",\n      state: { place, imgArr },\n      query: {\n        code: 22\n      }\n    });\n  };\n\n  return (\n    <div className=\"app\">\n      <img className=\"bg\" src={bg} />\n      <select\n        value={place}\n        className=\"place\"\n        placeholder=\"请选择\"\n        onChange={e => setPlace(e.target.value)}\n      >\n        <option value=\"default\">请选择</option>\n        {placeArr.map(item => (\n          <option key={item} value={item}>\n            {item}\n          </option>\n        ))}\n      </select>\n      <Loading loading={loading}></Loading>\n      <div className=\"target\">\n        <Target avatar={avatar} place={place}></Target>\n      </div>\n      <img src={arrow} alt=\"\" className=\"arrow\" onClick={getImage} />\n      <style jsx>{style}</style>\n    </div>\n  );\n};\n\nexport default Home;\n\nconst style = css`\n  .app {\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n  }\n  .bg {\n    width: 100vw;\n    height: 100vh;\n  }\n  select {\n    color: red;\n    background: inherit;\n    border: none;\n    outline: none;\n    width: 60px;\n    height: 40px;\n    line-height: 40px;\n    appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    text-align: center;\n  }\n  .place {\n    color: black;\n    font-size: 1.3rem;\n    position: absolute;\n    top: 83%;\n    left: 26%;\n  }\n  .target {\n    position: absolute;\n    top: -9999px;\n    left: -9999px;\n  }\n  .arrow {\n    width: 50px;\n    height: 50px;\n    position: absolute;\n    right: 0px;\n    top: calc(50% - 30px);\n  }\n`;\n","import React, { FC, useState } from \"react\";\nimport Slider from \"react-slick\";\nimport { imgUrls } from \"../../utils\";\nimport css from \"styled-jsx/css\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\n\ninterface Props {\n  imgArr: Array<string>;\n}\n\nconst MySlider: FC<Props> = ({ imgArr }) => {\n  let slider: any;\n  const [num, setNum] = useState(0);\n  const settings = {\n    infinite: true,\n    speed: 200,\n    // slidesToShow: 1,\n    // slidesToScroll: 1,\n    centerPadding: \"40px\",\n    centerMode: true,\n    afterChange: (e: number) => {\n      setNum(e);\n    },\n    fade: true,\n    className: \"center\"\n  };\n  const change = () => {\n    slider.slickNext();\n  };\n  return (\n    <div>\n      <Slider {...settings} ref={(c: any) => (slider = c)}>\n        {imgArr.map((item, index) => (\n          <div key={item} id={num === index ? \"target\" : \"\"} onClick={change}>\n            <img className=\"item\" src={item} alt=\"\" />\n          </div>\n        ))}\n      </Slider>\n      <style jsx>{style}</style>\n    </div>\n  );\n};\n\nexport default MySlider;\n\nconst style = css`\n  .item {\n    width: 95%;\n    border: 3px solid #eee;\n    border-radius: 10px;\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.5),\n      0 12px 40px 0 rgba(0, 0, 0, 0.2);\n  }\n\n  .name {\n    font-size: 30px;\n    position: absolute;\n    top: 80px;\n    left: 150px;\n    z-index: 999;\n  }\n  .center {\n    width: 100%;\n  }\n`;\n","import React, { SFC } from \"react\";\nimport css from \"styled-jsx/css\";\nimport Slider from \"../../components/Slider\";\nimport { imgUrls } from \"../../utils/index\";\n\ninterface Props {\n  place: string;\n  location: { state: any };\n}\n\nconst Poster: SFC<Props> = props => {\n  console.log(\"props :\", props);\n  return (\n    <div className=\"poster\">\n      <div className=\"wrap\">\n        <div className=\"slider\" id=\"slider\">\n          <Slider\n            imgArr={\n              props.location.state ? props.location.state.imgArr : imgUrls\n            }\n          ></Slider>\n          <div className=\"tip\">长按即可保存</div>\n        </div>\n      </div>\n      <style jsx>{style}</style>\n    </div>\n  );\n};\n\nexport default Poster;\n\nconst style = css`\n  .poster {\n    width: 100vw;\n    height: 100vh;\n    background: #cd2626;\n  }\n\n  .slider {\n    padding-top: 10%;\n  }\n  .tip {\n    display: flex;\n    justify-content: center;\n    font-size: 1em;\n    color: #eee;\n  }\n`;\n","import React, { SFC } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Home from \"./pages/home\";\nimport Poster from \"./pages/poster\";\n\nconst App: SFC = () => (\n  <div>\n    <Route exact path=\"/\" component={Home}></Route>\n    <Route exact path=\"/poster\" component={Poster}></Route>\n    <style jsx global>\n      {`\n        body {\n          margin: 0;\n          padding: 0;\n        }\n        img {\n          vertical-align: bottom;\n          display: block;\n        }\n        .slick-track {\n          overflow: hidden !important;\n        }\n      `}\n    </style>\n  </div>\n);\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}